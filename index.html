<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Valoración</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .highlight {
            background-color: red;
        }
    </style>
</head>
<body>
    <form id="valoracionForm" class="container mt-4">
        <div id="section1" class="section active">
            <h2>Valoración Inicial</h2>
            <fieldset class="border p-4">
                <legend class="w-auto">Datos Administrativos</legend>
                <div class="form-group">
                    <label for="nhc">NHC:</label>
                    <input type="text" id="nhc" name="nhc" class="form-control">
                </div>
                <div class="form-group">
                    <label for="primerApellido">1er Apellido:</label>
                    <input type="text" id="primerApellido" name="primerApellido" class="form-control">
                </div>
                <div class="form-group">
                    <label for="segundoApellido">2º Apellido:</label>
                    <input type="text" id="segundoApellido" name="segundoApellido" class="form-control">
                </div>
                <div class="form-group">
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre" name="nombre" class="form-control">
                </div>
                <div class="form-group">
                    <label for="edad">Edad:</label>
                    <input type="number" id="edad" name="edad" class="form-control" onchange="evaluateStressEcho()">
                </div>
                <div class="form-group">
                    <label for="sexo">Sexo:</label>
                    <select id="sexo" name="sexo" class="form-control">
                        <option value="1">Hombre</option>
                        <option value="2">Mujer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="peso">Peso:</label>
                    <input type="number" id="peso" name="peso" class="form-control">
                </div>
                <div class="form-group">
                    <label for="talla">Talla:</label>
                    <input type="number" id="talla" name="talla" class="form-control">
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Trasplante</legend>
                <div class="form-group">
                    <label for="tipoTrasplante">Tipo de Trasplante:</label>
                    <select id="tipoTrasplante" name="tipoTrasplante" class="form-control">
                        <option value="1">Trasplante</option>
                        <option value="2">Re-trasplante</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Indicación:</label>
                    <div class="form-check">
                        <input type="checkbox" id="hepatocarcinoma" name="indicacion" value="Hepatocarcinoma" class="form-check-input">
                        <label for="hepatocarcinoma" class="form-check-label">Hepatocarcinoma</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisAlcoholica" name="indicacion" value="Cirrosis Alcohólica" class="form-check-input">
                        <label for="cirrosisAlcoholica" class="form-check-label">Cirrosis Alcohólica</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisVirusB" name="indicacion" value="Cirrosis por virus B" class="form-check-input">
                        <label for="cirrosisVirusB" class="form-check-label">Cirrosis por virus B</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisVirusC" name="indicacion" value="Cirrosis por virus C" class="form-check-input">
                        <label for="cirrosisVirusC" class="form-check-label">Cirrosis por virus C</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisNASH" name="indicacion" value="Cirrosis NASH" class="form-check-input">
                        <label for="cirrosisNASH" class="form-check-label">Cirrosis NASH</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisAutoinmune" name="indicacion" value="Cirrosis Autoinmune" class="form-check-input">
                        <label for="cirrosisAutoinmune" class="form-check-label">Cirrosis Autoinmune</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisCriptogenica" name="indicacion" value="Cirrosis Criptogénica" class="form-check-input">
                        <label for="cirrosisCriptogenica" class="form-check-label">Cirrosis Criptogénica</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="cirrosisBiliarPrimaria" name="indicacion" value="Cirrosis Biliar Primaria" class="form-check-input">
                        <label for="cirrosisBiliarPrimaria" class="form-check-label">Cirrosis Biliar Primaria</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="colangitisEsclerosante" name="indicacion" value="Colangitis Esclerosante" class="form-check-input">
                        <label for="colangitisEsclerosante" class="form-check-label">Colangitis Esclerosante</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="hemangioma" name="indicacion" value="Hemangioma" class="form-check-input">
                        <label for="hemangioma" class="form-check-label">Hemangioma</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="poliquistosisOvarica" name="indicacion" value="Poliquistosis Ovárica" class="form-check-input">
                        <label for="poliquistosisOvarica" class="form-check-label">Poliquistosis Ovárica</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="buddChiari" name="indicacion" value="Budd Chiari" class="form-check-input">
                        <label for="buddChiari" class="form-check-label">Budd Chiari</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="falloHepaticoAgudo" name="indicacion" value="Fallo Hepático Agudo" class="form-check-input">
                        <label for="falloHepaticoAgudo" class="form-check-label">Fallo Hepático Agudo</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="falloHepaticoAgudoSobreCronico" name="indicacion" value="Fallo Hepático Agudo Sobre Crónico" class="form-check-input">
                        <label for="falloHepaticoAgudoSobreCronico" class="form-check-label">Fallo Hepático Agudo Sobre Crónico</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="hepatitisAgudaSubfulminante" name="indicacion" value="Hepatítis Aguda subfulminante" class="form-check-input">
                        <label for="hepatitisAgudaSubfulminante" class="form-check-label">Hepatítis Aguda subfulminante</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="trombosisArteriaHepatica" name="indicacion" value="Trombosis de arteria Hepática" class="form-check-input">
                        <label for="trombosisArteriaHepatica" class="form-check-label">Trombosis de arteria Hepática</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="trombosisPortal" name="indicacion" value="Trombosis Portal" class="form-check-input">
                        <label for="trombosisPortal" class="form-check-label">Trombosis Portal</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="malfuncionPrimaria" name="indicacion" value="Malfunción Primaria" class="form-check-input">
                        <label for="malfuncionPrimaria" class="form-check-label">Malfunción Primaria</label>
                    </div>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Clasificación Child Pugh</legend>
                <div class="form-group">
                    <label for="ascitis">Ascitis:</label>
                    <select id="ascitis" name="ascitis" class="form-control" onchange="updateChildPughScore()">
                        <option value="1" selected>Ausente</option>
                        <option value="2">Leve</option>
                        <option value="3">Moderada</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="bilirrubina">Bilirrubina:</label>
                    <select id="bilirrubina" name="bilirrubina" class="form-control" onchange="updateChildPughScore()">
                        <option value="1" selected>&lt;=2</option>
                        <option value="2">2-3</option>
                        <option value="3">&gt;3</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="inr">INR:</label>
                    <select id="inr" name="inr" class="form-control" onchange="updateChildPughScore()">
                        <option value="1" selected>&lt;1.8</option>
                        <option value="2">1.8-2.3</option>
                        <option value="3">&gt;2.3</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="encefalopatia">Encefalopatía:</label>
                    <select id="encefalopatia" name="encefalopatia" class="form-control" onchange="updateChildPughScore()">
                        <option value="1" selected>Ausente</option>
                        <option value="2">Grado 1-2 (Alteración mínima del comportamiento - Desorientación leve, asterixis)</option>
                        <option value="3">Grado 3-4 (Confusión severa, somnolencia - Coma)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="childPughScore">Puntuación Child Pugh:</label>
                    <span id="childPughScore">4</span>
                </div>
                <div class="form-group">
                    <label for="escalaChild">Escala Child:</label>
                    <select id="escalaChild" name="escalaChild" class="form-control" onchange="highlightChildRow()">
                        <option value="1">Child A: 5-6 puntos</option>
                        <option value="2">Child B: 7-9 puntos</option>
                        <option value="3">Child C: 10-15 puntos</option>
                    </select>
                </div>
                <h3>Mortalidad de los pacientes a un año y dos años en función de la clasificación Child</h3>
                <table border="1" id="mortalidadChildTable" class="table table-bordered">
                    <tr>
                        <th>Clasificación Child</th>
                        <th>Mortalidad a 1 año</th>
                        <th>Mortalidad a 2 años</th>
                    </tr>
                    <tr id="childA">
                        <td>Child A</td>
                        <td>100%</td>
                        <td>85%</td>
                    </tr>
                    <tr id="childB">
                        <td>Child B</td>
                        <td>80%</td>                        
                        <td>60%</td>
                    </tr>
                    <tr id="childC">
                        <td>Child C</td>
                        <td>45%</td>                        
                        <td>35%</td>
                    </tr>
                </table>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Puntuación MELD</legend>
                <div class="form-group">
                    <label for="creatinina">Creatinina (mg/dl):</label>
                    <input type="number" id="creatinina" name="creatinina" step="0.01" value="1" class="form-control" onchange="updateMeldScores()">
                </div>
                <div class="form-group">
                    <label for="inrMeld">INR:</label>
                    <input type="number" id="inrMeld" name="inrMeld" step="0.01" value="1" class="form-control" onchange="updateMeldScores()">
                </div>
                <div class="form-group">
                    <label for="bilirrubinaMeld">Bilirrubina (mg/dl):</label>
                    <input type="number" id="bilirrubinaMeld" name="bilirrubinaMeld" step="0.01" value="1" class="form-control" onchange="updateMeldScores()">
                </div>
                <div class="form-group">
                    <label for="sodio">Na (mmol/L):</label>
                    <input type="number" id="sodio" name="sodio" step="0.01" value="140" class="form-control" onchange="updateMeldScores()">
                </div>
                <div class="form-group">
                    <label>Creatinina: Valor máximo 4. Si el paciente ha sido sometido a diálisis 2 veces en la semana previa, puntuar 4</label>
                </div>
                <div class="form-group">
                    <label for="meldScore">MELD Score:</label>
                    <span id="meldScore">0</span>
                </div>
                <div class="form-group">
                    <label for="meldNaScore">MELD-Na Score:</label>
                    <span id="meldNaScore">0</span>
                </div>
                <h3>Mortalidad a tres meses</h3>
                <table border="1" id="mortalidadTresMesesTable" class="table table-bordered">
                    <tr>
                        <th>Valores MELD</th>
                        <th>Mortalidad</th>
                    </tr>
                    <tr id="meld40">
                        <td>40 o más</td>
                        <td>71%</td>
                    </tr>
                    <tr id="meld30_39">
                        <td>30-39</td>
                        <td>52%</td>
                    </tr>
                    <tr id="meld20_29">
                        <td>20-29</td>
                        <td>19%</td>
                    </tr>
                    <tr id="meld10_19">
                        <td>10-19</td>
                        <td>6%</td>
                    </tr>
                    <tr id="meldMenor9">
                        <td>&lt;9</td>
                        <td>2%</td>
                    </tr>
                </table>
            </fieldset>
            <button type="button" class="btn btn-primary" onclick="showNextSection(1)">Siguiente</button>
        </div>
        <div id="section2" class="section">
            <h2>Valoración Cardiológica</h2>
            <fieldset class="border p-4">
                <legend class="w-auto">Factores de Riesgo Cardiovascular</legend>
                <div class="form-check">
                    <input type="checkbox" id="diabetes" name="diabetes" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="diabetes" class="form-check-label">Diabetes</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="hipertension" name="hipertension" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="hipertension" class="form-check-label">Hipertensión</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="dislipidemia" name="dislipidemia" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="dislipidemia" class="form-check-label">Dislipidemia</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="tabaquismo" name="tabaquismo" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="tabaquismo" class="form-check-label">Tabaquismo (actual o pasado)</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="obesidad" name="obesidad" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="obesidad" class="form-check-label">Obesidad</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="historiaPatologiaCoronaria" name="historiaPatologiaCoronaria" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="historiaPatologiaCoronaria" class="form-check-label">Historia previa o clínica de patología coronaria</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="historiaFamiliarPatologiaCoronaria" name="historiaFamiliarPatologiaCoronaria" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="historiaFamiliarPatologiaCoronaria" class="form-check-label">Historia familiar de patología coronaria</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="arteriopatiaPeriferica" name="arteriopatiaPeriferica" class="form-check-input" onchange="evaluateStressEcho()">
                    <label for="arteriopatiaPeriferica" class="form-check-label">Presencia de arteriopatía periférica</label>
                </div>
                
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Electrocardiograma</legend>
                <div class="form-group">
                    <label for="ritmo">Ritmo:</label>
                    <select id="ritmo" name="ritmo" class="form-control">
                        <option value="1">Sinusal</option>
                        <option value="2">Fibrilación Auricular</option>
                        <option value="3">Flutter Auricular</option>
                        <option value="4">Bloqueo AV 1er grado</option>
                        <option value="5">Bloqueo AV 2do grado</option>
                        <option value="6">Otros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="qtc">QTc:</label>
                    <input type="number" id="qtc" name="qtc" step="0.01" class="form-control">
                </div>
                <div class="form-group">
                    <label for="descripcionEcg">Descripción:</label>
                    <textarea id="descripcionEcg" name="descripcionEcg" class="form-control"></textarea>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Ecocardiografia</legend>
                <div class="form-group">
                    <label for="fraccionEyeccion">Fracción de Eyección VI:</label>
                    <select id="fraccionEyeccion" name="fraccionEyeccion" class="form-control">
                        <option value="1">Normal (&gt;50%)</option>
                        <option value="2">Levemente Disminuida (40-49%)</option>
                        <option value="3">Moderadamente disminuida (30-39%)</option>
                        <option value="4">Severamente disminuida (&lt;30%)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="fraccionVD">Función VD:</label>
                    <select id="fraccionVD" name="fraccionVD" class="form-control">
                        <option value="1">Normal</option>
                        <option value="2">Deprimida</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="papsEstimada">PAPs estimada:</label>
                    <input type="number" id="papsEstimada" name="papsEstimada"  step="1" class="form-control">
                </div>
                <div class="form-group">
                    <label for="Tapse">TAPSE:</label>
                    <input type="number" id="Tapse" name="Tapse"  step="1" class="form-control">
                </div>
                <div class="form-group">
                    <label for="descripcionCardiologica">Descripción:</label>
                    <textarea id="descripcionCardiologica" name="descripcionCardiologica" class="form-control"></textarea>
                </div>
            </fieldset>
            
            <fieldset class="border p-4">
                <legend class="w-auto">Índice HFA PEEF</legend>
                <div id="resultadoHfaPeef" style="padding: 5px; background-color: green; color: white;">
                    Bajo riesgo de insuficiencia cardiaca
                </div>
                <!-- Sección Funcional -->
                <div class="form-group">
                    <label for="funcional">Funcional</label>
                    <select id="funcional" required class="form-control" onchange="calculateHfaPeefIndex()">
                        <option value="0" selected>Normal (0 puntos)</option>
                        <option value="2">e' Septal &lt; 7 cm/seg ó e' Lateral &lt; 10 cm/seg (2 puntos)</option>
                        <option value="2">Relación E/e' ≥ 15 (2 puntos)</option>
                        <option value="2">PASP &gt; 35 mmHg (2 puntos)</option>
                        <option value="1">Relación E/e' 9-14 (1 punto)</option>
                        <option value="1">Global Strain &lt; 16% (1 punto)</option>
                    </select>
                </div>

                <!-- Sección Morfológico -->
                <div class="form-group">
                    <label for="morfologico">Morfológico</label>
                    <select id="morfologico" required class="form-control" onchange="calculateHfaPeefIndex()">
                        <option value="0" selected>Normal (0 puntos)</option>
                        <option value="2">Vol. Aurícula izquierda &gt; 34 ml/m<sup>2</sup> (2 puntos)</option>
                        <option value="2">Masa VI &gt; 149/122 m<sup>2</sup> + Grosor relativo pared &gt; 0.42 (2 puntos)</option>
                        <option value="1">Vol. Aurícula izquierda 29-34 ml/m<sup>2</sup> (1 punto)</option>
                        <option value="1">Masa VI &gt; 115/95 gr/m<sup>2</sup> (1 punto)</option>
                        <option value="1">Grosor pared VI &ge; 12 mm (1 punto)</option>
                    </select>
                </div>

                <!-- Sección Biomarcador en ritmo sinusal -->
                <div class="form-group">
                    <label for="biomarcador">Biomarcador en ritmo sinusal</label>
                    <select id="biomarcador" class="form-control" onchange="calculateHfaPeefIndex(); resetBiomarcadorFA()">
                        <option value="0" selected>Normal (0 puntos)</option>
                        <option value="2">NT-proBNP &gt; 220 pg/ml (2 puntos)</option>
                        <option value="1">NT-proBNP 115-220 pg/ml (1 punto)</option>
                    </select>
                </div>

                <!-- Sección Biomarcador en FA -->
                <div class="form-group">
                    <label for="biomarcadorFA">Biomarcador en FA</label>
                    <select id="biomarcadorFA" class="form-control" onchange="calculateHfaPeefIndex(); resetBiomarcador()">
                        <option value="0" selected>Normal (0 puntos)</option>
                        <option value="2">NT-proBNP &gt; 660 pg/ml (2 puntos)</option>
                        <option value="1">NT-proBNP 365-660 pg/ml (1 punto)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="indiceHfaPeef">Índice HFA PEEF:</label>
                    <span id="indiceHfaPeef">0</span>
                </div>
                
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Ecocardiograma de Stress</legend>
                <div id="stressEchoMessage" style="padding: 5px; background-color: green; color: white;">
                    No es necesario ecocardiograma de stress
                </div>
                <div class="form-group">
                    <label for="resultadoStress">Resultado:</label>
                    <select id="resultadoStress" name="resultadoStress" class="form-control">
                        <option value="0">No indicado</option>
                        <option value="1">No puede realizarse</option>
                        <option value="2">No concluyente</option>
                        <option value="3">Concluyente positivo para isquemia</option>
                        <option value="4">Concluyente negativo para isquemia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="comentarioStress">Comentario:</label>
                    <textarea id="comentarioStress" name="comentarioStress" class="form-control"></textarea>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">AngioTAC</legend>
                <div id="angioTacMessage" style="padding: 5px; background-color: green; color: white;">
                    No es necesario angioTAC
                </div>
                <div class="form-check">
                    <input type="checkbox" id="estenosisDerecha" name="estenosisDerecha" class="form-check-input">
                    <label for="estenosisDerecha" class="form-check-label">Estenosis coronaria derecha &gt;70%</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="estenosisIzquierda" name="estenosisIzquierda" class="form-check-input">
                    <label for="estenosisIzquierda" class="form-check-label">Estenosis coronaria izquierda &gt;50%</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="scoreCalcico" name="scoreCalcico" class="form-check-input">
                    <label for="scoreCalcico" class="form-check-label">Score calcico por encima de 100</label>
                </div>
                <div class="form-group">
                    <label for="comentarioAngioTac">Comentario:</label>
                    <textarea id="comentarioAngioTac" name="comentarioAngioTac" class="form-control"></textarea>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Coronariografía</legend>
                <div id="coronariografiaMessage" style="padding: 5px; background-color: green; color: white;">
                    No es necesario realizar coronariografía
                </div>
                <div class="form-group">
                    <label for="resultadoCoronariografia">Revascularizado:</label>
                    <select id="resultadoCoronariografia" name="resultadoCoronariografia" class="form-control">
                        <option value="0">No indicado</option>
                        <option value="1">No puede realizarse</option>
                        <option value="2">Revascularizado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="comentarioCoronariografia">Comentario:</label>
                    <textarea id="comentarioCoronariografia" name="comentarioCoronariografia" class="form-control"></textarea>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Cateterismo Derecho</legend>
                <div id="cateterismoMessage" style="padding: 5px; background-color: green; color: white;">
                    No es necesario cateterismo derecho
                </div>
                <div class="form-group">
                    <label for="paps">PAPs:</label>
                    <input type="number" id="paps" name="paps"  step="1" class="form-control">
                </div>
                <div class="form-group">
                    <label for="papmSelect">PAPm:</label>
                    <select id="papmSelect" name="papmSelect" class="form-control">
                        <option value="0" selected>Normal (PAPm &lt; 25)</option>
                        <option value="1">HTP leve (PAPm 25-34)</option>
                        <option value="2">HTP moderada (PAPm 35-44)</option>
                        <option value="3">HTP severa (PAPm &ge; 45)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="irvp">IRVP:</label>
                    <input type="number" id="irvp" name="irvp" step="0.01" class="form-control">
                </div>
                <div class="form-group">
                    <label for="pshl">PSHL:</label>
                    <input type="number" id="pshl" name="pshl" step="0.01" class="form-control">
                </div>
                <div class="form-group">
                    <label for="pshe">PSHE:</label>
                    <input type="number" id="pshe" name="pshe" step="0.01" class="form-control">
                </div>
                
                <div class="form-group">
                    <label for="comentarioCateterismo">Comentario:</label>
                    <textarea id="comentarioCateterismo" name="comentarioCateterismo" class="form-control"></textarea>
                </div>
            </fieldset>
            <button type="button" class="btn btn-primary" onclick="showPreviousSection(2)">Anterior</button>
            <button type="button" class="btn btn-primary" onclick="showNextSection(2)">Siguiente</button>
        </div>
        <div id="section3" class="section">
            <h2>Valoración Pulmonar y Vía aérea</h2>
            <fieldset class="border p-4">
                <legend class="w-auto">Rx tórax</legend>
                <div class="form-group">
                    <label for="rxTorax">Hidrotórax</label>
                    <select id="rxTorax" name="rxTorax" class="form-control">
                        <option value="no" selected>No</option>
                        <option value="si">Sí</option>
                    </select>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Valoración gasométrica</legend>
                <div class="form-group">
                    <label for="ph">Ph:</label>
                    <input type="number" id="ph" name="ph" step="0.01" class="form-control" onchange="evaluateAnionGap()">
                </div>
                <div class="form-group">
                    <label for="pao2">PaO2:</label>
                    <input type="number" id="pao2" name="pao2" step="0.01" class="form-control">
                </div>
                <div class="form-group">
                    <label for="paco2">PaCO2:</label>
                    <input type="number" id="paco2" name="paco2" step="0.01" class="form-control">
                </div>
                <div class="form-group">
                    <label for="hco3">HCO3:</label>
                    <input type="number" id="hco3" name="hco3" step="0.01" class="form-control" onchange="evaluateAnionGap()">
                </div>
                <div class="form-group">
                    <label for="eb">EB:</label>
                    <input type="number" id="eb" name="eb" step="0.01" class="form-control">
                </div>
                <div class="form-group">
                    <label for="cl">Cl:</label>
                    <input type="number" id="cl" name="cl" step="0.01" class="form-control" onchange="evaluateAnionGap()">
                </div>
                <div class="form-group">
                    <label for="na">Na:</label>
                    <input type="number" id="na" name="na" step="0.01" class="form-control" onchange="evaluateAnionGap()">
                </div>
                <div class="form-group">
                    <label for="fio2">FiO2:</label>
                    <input type="number" id="fio2" name="fio2" step="0.01" min="0" max="1" value="0.21" class="form-control" onchange="evaluateAnionGap(); evaluateAaGradient()">
                </div>
    
                <div id="aaGradientMessage" style="padding: 5px; background-color: green; color: white;">
                    Gradiente A-a de oxígeno: normal
                </div>
                
                <table border="1" id="gravedadShpTable" class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Gravedad SHP</th>
                            <th>PaO2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="leve">
                            <td>Leve</td>
                            <td>&gt;=80</td>
                        </tr>
                        <tr id="moderada">
                            <td>Moderada</td>
                            <td>60-79</td>
                        </tr>
                        <tr id="severa">
                            <td>Severa</td>
                            <td>50-59</td>
                        </tr>
                        <tr id="muySevera">
                            <td>Muy severa</td>
                            <td>&lt;50</td>
                        </tr>
                    </tbody>
                </table>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Ecocardiografia de contraste</legend>
                <div id="ecoContrasteMessage" style="padding: 5px; background-color: green; color: white;">
                    No se requiere ecografía de contraste
                </div>
                <div class="form-group">
                    <label for="shunt">Shunt:</label>
                    <select id="shunt" name="shunt" class="form-control">
                        <option value="0">No indicado</option>
                        <option value="1">&lt;10%</option>
                        <option value="2">10-20%</option>
                        <option value="3">&gt;20%</option>
                    </select>
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Pruebas de Función Respiratoria</legend>
                <div class="form-group">
                    <label for="fev1">FEV1 (% predicho):</label>
                    <input type="number" id="fev1" name="fev1" step="0.01" class="form-control" onchange="evaluatePulmonaryFunction()">
                </div>
                <div class="form-group">
                    <label for="fvc">FVC (% predicho):</label>
                    <input type="number" id="fvc" name="fvc" step="0.01" class="form-control" onchange="evaluatePulmonaryFunction()">
                </div>
                <div class="form-group">
                    <label for="fev1FvcRatio">FEV1/FVC:</label>
                    <span id="fev1FvcRatio">0</span>
                </div>
                <div id="pulmonaryFunctionMessage" style="padding: 5px; background-color: green; color: white;">
                    Resultado de la función pulmonar
                </div>
            </fieldset>
            <button type="button" class="btn btn-primary" onclick="showPreviousSection(3)">Anterior</button>
            <button type="button" class="btn btn-primary" onclick="showNextSection(3)">Siguiente</button>
        </div>
        <div id="section4" class="section">
            <h2>Valoración Renal</h2>
            <fieldset class="border p-4">
                <legend class="w-auto">Analítica</legend>
                <div class="form-group">
                    <label for="currentCreatinine">Creatinina actual:</label>
                    <input type="number" id="currentCreatinine" value ="0.5" class="form-control" oninput="calculateEGFR()">
                </div>
                
                <div id="egfrMessage" style="padding: 5px; background-color: green; color: white;">
                    eGFR: <span id="egfrValue">0</span> mL/min/1.73m²
                </div>

                <table border="1" id="egfrTable" class="table table-bordered">
                    <tr>
                        <th>Grado</th>
                        <th>eGFR</th>
                        <th>Definición</th>
                    </tr>
                    <tr id="grado1">
                        <td>Grado 1</td>
                        <td>>=90</td>
                        <td>Normal o aumentado</td>
                    </tr>
                    <tr id="grado2">
                        <td>Grado 2</td>
                        <td>60-89</td>
                        <td>Levemente disminuido</td>
                    </tr>
                    <tr id="grado3a">
                        <td>Grado 3a</td>
                        <td>45-59</td>
                        <td>Leve a moderadamente disminuido</td>
                    </tr>
                    <tr id="grado3b">
                        <td>Grado 3b</td>
                        <td>30-44</td>
                        <td>Moderado a severamente disminuido</td>
                    </tr>
                    <tr id="grado4">
                        <td>Grado 4</td>
                        <td>15-29</td>
                        <td>Severamente disminuido</td>
                    </tr>
                    <tr id="grado5">
                        <td>Grado 5</td>
                        <td><15</td>
                        <td>Fracaso renal</td>
                    </tr>
                </table>
                <div class="form-group">
                    <label for="previousCreatinine">Creatinina previa (últimos 3 meses):</label>
                    <input type="number" id="previousCreatinine" value= "0.5" class="form-control" oninput="checkAKI()">
                </div>
                <div id="akiMessage" style="padding: 5px; background-color:green; color:white;">
                    Bajo riesgo de AKI
                </div>
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Riesgo de CRRT intraoperatoria</legend>
                <div class="form-group">
                    <label for="falloHepatico">Fallo Hepático:</label>
                    <select id="falloHepatico" name="falloHepatico" class="form-control" onchange="calculateCRRTScore()">
                        <option value="1" selected>Crónico</option>
                        <option value="2">Agudo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="donanteAsistolia">Donante en asistolia:</label>
                    <select id="donanteAsistolia" name="donanteAsistolia" class="form-control" onchange="calculateCRRTScore()">
                        <option value="0" selected>No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="retrasplante">Retrasplante:</label>
                    <select id="retrasplante" name="retrasplante" class="form-control" onchange="calculateCRRTScore()">
                        <option value="0" selected>No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="vasopresoresPreop">Vasopresores preop:</label>
                    <select id="vasopresoresPreop" name="vasopresoresPreop" class="form-control" onchange="calculateCRRTScore()">
                        <option value="0" selected>No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="crrtPreop">CRRT preop:</label>
                    <select id="crrtPreop" name="crrtPreop" class="form-control" onchange="calculateCRRTScore()">
                        <option value="0" selected>No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="kPreop">K+ preop:</label>
                    <input type="number" id="kPreop" name="kPreop" step="0.01" class="form-control" onchange="calculateCRRTScore()">
                </div>
                <div class="form-group">
                    <label for="bilirrubina">Bilirrubina:</label>
                    <input type="number" id="bilirrubina" name="bilirrubina" step="0.01" class="form-control" onchange="calculateCRRTScore()">
                </div>
                <div id="crrtScoreMessage" style="padding: 5px; background-color:blue; color: white;">
                    Score de CRRT: 0
                </div>
            </fieldset>
            <button type="button" class="btn btn-primary" onclick="showPreviousSection(4)">Anterior</button>
            <button type="button" class="btn btn-primary" onclick="showNextSection(4)">Siguiente</button>
        </div>
        <div id="section5" class="section">
        <h2>Valoración Hematológica</h2>
        <fieldset class="border p-4">
            <legend class="w-auto">Riesgo de Sangrado</legend>
            <div class="form-group">
                <label for="retrasplantehemato">Retrasplante:</label>
                <select id="retrasplantehemato" name="retrasplantehemato" class="form-control">
                    <option value="0" selected>No</option>
                    <option value="1">Sí</option>
                </select>
            </div>
            <div class="form-group">
                <label for="sexohemato">Sexo:</label>
                <select id="sexohemato" name="sexohemato" class="form-control">
                    <option value="1" selected>Hombre</option>
                    <option value="2">Mujer</option>
                </select>
            </div>
            <div class="form-group">
                <label for="edadhemato">Edad:</label>
                <input type="number" id="edadhemato" name="edadhemato" class="form-control">
            </div>
            <div class="form-group">
                <label for="hemoglobina">Hemoglobina:</label>
                <input type="number" id="hemoglobina" name="hemoglobina" class="form-control">
            </div>
            <div class="form-group">
                <label for="protrombina">INR:</label>
                <input type="number" id="protrombina" name="protrombina" class="form-control">
            </div>
            <div class="form-group">
                <label for="creatininahemato">Creatinina:</label>
                <input type="number" id="creatininahemato" name="creatininahemato" class="form-control">
            </div>
            <div class="form-group">
                <label for="albumina">Albúmina:</label>
                <input type="number" id="albumina" name="albumina" class="form-control">
            </div>
            <div class="form-group">
                <label for="plaquetas">Plaquetas:</label>
                <input type="number" id="plaquetas" name="plaquetas" class="form-control">
            </div>
            <div class="form-check">
                <input type="checkbox" id="cirugiaAbdominalPrevia" name="cirugiaAbdominalPrevia" class="form-check-input">
                <label for="cirugiaAbdominalPrevia" class="form-check-label">Cirugía abdominal previa</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="peritonitisBacterianaEspontanea" name="peritonitisBacterianaEspontanea" class="form-check-input">
                <label for="peritonitisBacterianaEspontanea" class="form-check-label">Peritonitis bacteriana espontánea</label>
            </div>
            <div id="bleedingScoreMessage" style="padding: 5px; background-color: green; color: white;">
                Bajo riesgo de sangrado. Score: 0
            </div>
        </fieldset>
        <button type="button" class="btn btn-primary" onclick="showPreviousSection(5)">Anterior</button>
        <button type="button" class="btn btn-primary" onclick="showNextSection(5)">Siguiente</button>
    </div>

        <div id="section6" class="section">
            <h2>Valoración Endocrinometabólica</h2>
            <!-- Contenido de la sección -->
            <fieldset class="border p-4">
                <legend class="w-auto">Valoración nutricional. Escala RFH NPT</legend>
                
                <div class="form-group">
                    <label for="hepatitisAlcoholicaAguda">Hepatitis alcohólica aguda:</label>
                    <select id="hepatitisAlcoholicaAguda" name="hepatitisAlcoholicaAguda" class="form-control">
                        <option value="0">No</option>
                        <option value="6">Sí</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="nutricionEnteral">Nutrición enteral:</label>
                    <select id="nutricionEnteral" name="nutricionEnteral" class="form-control">
                        <option value="0">No</option>
                        <option value="6">Sí</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="sobrecargaHidrica">Sobrecarga hídrica:</label>
                    <select id="sobrecargaHidrica" name="sobrecargaHidrica" class="form-control">
                        <option value="0">No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="imc">IMC:</label>
                    <select id="imc" name="imc" class="form-control">
                        <option value="0">>20%</option>
                        <option value="1">18.5-20%</option>
                        <option value="2"><18.5%</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="perdidaPeso6Meses">Pérdida de peso en los últimos 6 meses:</label>
                    <select id="perdidaPeso6Meses" name="perdidaPeso6Meses" class="form-control">
                        <option value="0"><5%</option>
                        <option value="1">5-10%</option>
                        <option value="2">>10%</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="enfermedadAgudaSinAlimentacion">Enfermedad aguda sin alimentación en 5 días:</label>
                    <select id="enfermedadAgudaSinAlimentacion" name="enfermedadAgudaSinAlimentacion" class="form-control">
                        <option value="0">No</option>
                        <option value="2">Sí</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="capacidadAlimentarse">Interferida capacidad de alimentarse:</label>
                    <select id="capacidadAlimentarse" name="capacidadAlimentarse" class="form-control">
                        <option value="0">No</option>
                        <option value="1">Ocasionalmente</option>
                        <option value="2">Sí</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="menosMitadDieta5Dias">Menos de la mitad de la dieta en los últimos 5 días:</label>
                    <select id="menosMitadDieta5Dias" name="menosMitadDieta5Dias" class="form-control">
                        <option value="0">No</option>
                        <option value="2">Sí</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="perdidaPeso3_6Meses">Pérdida de peso en los últimos 3-6 meses:</label>
                    <select id="perdidaPeso3_6Meses" name="perdidaPeso3_6Meses" class="form-control">
                        <option value="0">No</option>
                        <option value="1">No valorable</option>
                        <option value="2">Sí</option>
                    </select>
                </div>
                <div id="scoreMessageNPT" style="padding: 5px; margin-top: 10px;background-color: green;color: white;">
                    Bajo riesgo de malnutrición. Score: 0
                </div>
                
            </fieldset>
            <fieldset class="border p-4">
                <legend class="w-auto">Valoración de Fragilidad. Escala Frail</legend>
                
                <strong>FATIGABILIDAD</strong><br>
                <div class="form-group">
                    <label for="fatigabilidad">¿Qué parte del tiempo durante las últimas 4 semanas se sintió cansado/a?</label>
                    <select id="fatigabilidad" name="fatigabilidad" class="form-control">
                        <option value="1">Todo el tiempo</option>
                        <option value="1">La mayoría de las veces</option>
                        <option value="0">Parte del tiempo</option>
                        <option value="0">Un poco del tiempo</option>
                        <option value="0" selected>En ningún momento</option>
                    </select>
                </div>

                <strong>RESISTENCIA</strong><br>
                <div class="form-group">
                    <label for="resistencia">¿Tiene alguna dificultad para subir 10 escalones sin descansar por usted mismo/a, sin ningún tipo de ayuda?</label>
                    <select id="resistencia" name="resistencia" class="form-control">
                        <option value="0" selected>No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>

                <strong>DEAMBULACION</strong><br>
                <div class="form-group">
                    <label for="deambulacion">Por sí mismo/a y sin el uso de ayudas, ¿tiene alguna dificultad para caminar varios cientos de metros?</label>
                    <select id="deambulacion" name="deambulacion" class="form-control">
                        <option value="0" selected>No</option>
                        <option value="1">Sí</option>
                    </select>
                </div>

                <strong>COMORBILIDAD</strong><br>
                <label>Comorbilidades:</label>
                <br>
                <div class="form-check">
                    <input type="checkbox" id="hipertension" name="comorbilidad" value="hipertension" class="form-check-input">
                    <label for="hipertension" class="form-check-label">Hipertensión</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="diabetes" name="comorbilidad" value="diabetes" class="form-check-input">
                    <label for="diabetes" class="form-check-label">Diabetes</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="cancer" name="comorbilidad" value="cancer" class="form-check-input">
                    <label for="cancer" class="form-check-label">Cáncer (excepto piel de baja importancia)</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="enfermedadPulmonar" name="comorbilidad" value="enfermedadPulmonar" class="form-check-input">
                    <label for="enfermedadPulmonar" class="form-check-label">Enfermedad pulmonar crónica</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="infarto" name="comorbilidad" value="infarto" class="form-check-input">
                    <label for="infarto" class="form-check-label">Infarto de miocardio</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="insuficienciaCardiaca" name="comorbilidad" value="insuficienciaCardiaca" class="form-check-input">
                    <label for="insuficienciaCardiaca" class="form-check-label">Insuficiencia cardíaca congestiva</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="angina" name="comorbilidad" value="angina" class="form-check-input">
                    <label for="angina" class="form-check-label">Angina de pecho</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="asma" name="comorbilidad" value="asma" class="form-check-input">
                    <label for="asma" class="form-check-label">Asma</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="artritis" name="comorbilidad" value="artritis" class="form-check-input">
                    <label for="artritis" class="form-check-label">Artritis</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="ictus" name="comorbilidad" value="ictus" class="form-check-input">
                    <label for="ictus" class="form-check-label">Ictus</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="enfermedadRenal" name="comorbilidad" value="enfermedadRenal" class="form-check-input">
                    <label for="enfermedadRenal" class="form-check-label">Enfermedad renal</label>
                </div>

                <strong>PESO</strong><br>
                <div class="form-group">
                    <label for="pesofrail">¿Cuánto peso ha perdido en un año?</label>
                    <select id="pesofrail" name="pesofrail" class="form-control">
                        <option value="0" selected>No he perdido o he perdido menos de 5%</option>
                        <option value="1">Más de un 5%</option> 
                    </select>
                </div>

                <div id="frailScoreMessage" style="padding: 5px; background-color: green; color: white;">
                    Bajo riesgo de fragilidad. Score Frail: 0
                </div>
            </fieldset>

            <fieldset class="border p-4">
                <legend class="w-auto">Valoración de Capacidad Funcional. Escala Duke</legend>
                
                <div class="form-group">
                    <label for="autocuidado"><strong>¿Puede Usted realizar sus actividades de autocuidado, tales como alimentarse, vestirse, bañarse, o usar el baño?</strong></label>
                    <select id="autocuidado" name="autocuidado" class="form-control">
                        <option value="2.75">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="caminarCasa"><strong>¿Puede Usted caminar dentro de su casa y alrededor de ésta?</strong></label>
                    <select id="caminarCasa" name="caminarCasa" class="form-control">
                        <option value="1.75">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="caminar200m"><strong>¿Puede Usted caminar unos 200 metros, sin pendiente?</strong></label>
                    <select id="caminar200m" name="caminar200m" class="form-control">
                        <option value="2.75">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="subirEscaleras"><strong>¿Puede subir un piso de escaleras?</strong></label>
                    <select id="subirEscaleras" name="subirEscaleras" class="form-control">
                        <option value="5.5">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="correr"><strong>¿Puede correr una distancia corta?</strong></label>
                    <select id="correr" name="correr" class="form-control">
                        <option value="8">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="trabajoLigero"><strong>¿Puede hacer trabajo ligero en casa como lavar platos o limpiar el polvo?</strong></label>
                    <select id="trabajoLigero" name="trabajoLigero" class="form-control">
                        <option value="2.7">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="trabajoModerado"><strong>¿Puede hacer trabajo moderado en casa como barrer o hacer las camas?</strong></label>
                    <select id="trabajoModerado" name="trabajoModerado" class="form-control">
                        <option value="3.5">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="trabajoFuerte"><strong>¿Puede hacer trabajo fuerte en casa como mover muebles o fregar?</strong></label>
                    <select id="trabajoFuerte" name="trabajoFuerte" class="form-control">
                        <option value="8">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="trabajosJardin"><strong>¿Puede hacer trabajos de jardín como limpiar hojas, cortar plantas?</strong></label>
                    <select id="trabajosJardin" name="trabajosJardin" class="form-control">
                        <option value="4.5">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="relacionesSexuales"><strong>¿Puede tener relaciones sexuales?</strong></label>
                    <select id="relacionesSexuales" name="relacionesSexuales" class="form-control">
                        <option value="5.25">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="ejercicioModerado"><strong>¿Puede hacer ejercicio moderado como bailar o lanzar una pelota?</strong></label>
                    <select id="ejercicioModerado" name="ejercicioModerado" class="form-control">
                        <option value="6">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="ejercicioIntenso"><strong>¿Puede hacer ejercicio intenso como jugar al fútbol o baloncesto?</strong></label>
                    <select id="ejercicioIntenso" name="ejercicioIntenso" class="form-control">
                        <option value="7.5">Sí</option>
                        <option value="0">No</option>
                    </select>
                </div>

                <div id="dukeScoreMessage" style="padding: 5px; margin-top: 10px;background-color: green;color: white;">
                    Capacidad funcional aceptable.
                </div>
                         
            </fieldset>
            <button type="button" class="btn btn-primary" onclick="showPreviousSection(6)">Anterior</button>
            <button type="button" class="btn btn-primary" onclick="showNextSection(6)">Siguiente</button>
        </div>

        <div id="section7" class="section">
            <h2>Estimación de riesgos y recomendaciones</h2>
            <!-- Contenido de la sección -->
            <button type="button" class="btn btn-primary" onclick="showPreviousSection(7)">Anterior</button>
        </div>
    </form>

    <script>
        function showNextSection(currentSection) {
            document.getElementById('section' + currentSection).classList.remove('active');
            document.getElementById('section' + (currentSection + 1)).classList.add('active');
        }

        function showPreviousSection(currentSection) {
            document.getElementById('section' + currentSection).classList.remove('active');
            document.getElementById('section' + (currentSection - 1)).classList.add('active');
        }

        function updateChildPughScore() {
            const ascitis = parseInt(document.getElementById('ascitis').value);
            const bilirrubina = parseInt(document.getElementById('bilirrubina').value);
            const inr = parseInt(document.getElementById('inr').value);
            const encefalopatia = parseInt(document.getElementById('encefalopatia').value);

            const totalScore = ascitis + bilirrubina + inr + encefalopatia;
            document.getElementById('childPughScore').innerText = totalScore;

            const escalaChild = document.getElementById('escalaChild');
            if (totalScore >= 5 && totalScore <= 6) {
                escalaChild.value = "1";
            } else if (totalScore >= 7 && totalScore <= 9) {
                escalaChild.value = "2";
            } else if (totalScore >= 10 && totalScore <= 15) {
                escalaChild.value = "3";
            }
            highlightChildRow();
        }

        function highlightChildRow() {
            const escalaChild = document.getElementById('escalaChild').value;
            document.getElementById('childA').classList.remove('highlight');
            document.getElementById('childB').classList.remove('highlight');
            document.getElementById('childC').classList.remove('highlight');

            if (escalaChild === "1") {
                document.getElementById('childA').classList.add('highlight');
            } else if (escalaChild === "2") {
                document.getElementById('childB').classList.add('highlight');
            } else if (escalaChild === "3") {
                document.getElementById('childC').classList.add('highlight');
            }
        }

        function updateMeldScores() {
            let creatinina = parseFloat(document.getElementById('creatinina').value) || 0;
            if (creatinina > 4) {
                creatinina = 4;
            }
            const bilirrubina = parseFloat(document.getElementById('bilirrubinaMeld').value) || 0;
            const inr = parseFloat(document.getElementById('inrMeld').value) || 0;
            const sodio = parseFloat(document.getElementById('sodio').value) || 0;

            const meldScore = 9.6 * Math.log(creatinina) + 3.8 * Math.log(bilirrubina) + 11.2 * Math.log(inr) + 6.4;
            const meldNaScore = meldScore - sodio - (0.025 * meldScore * (140 - sodio)) + 140;

            document.getElementById('meldScore').innerText = meldScore.toFixed(2);
            document.getElementById('meldNaScore').innerText = meldNaScore.toFixed(2);

            highlightMeldRow(meldScore);
        }

        function highlightMeldRow(meldScore) {
            document.getElementById('meld40').classList.remove('highlight');
            document.getElementById('meld30_39').classList.remove('highlight');
            document.getElementById('meld20_29').classList.remove('highlight');
            document.getElementById('meld10_19').classList.remove('highlight');
            document.getElementById('meldMenor9').classList.remove('highlight');

            if (meldScore >= 40) {
                document.getElementById('meld40').classList.add('highlight');
            } else if (meldScore >= 30) {
                document.getElementById('meld30_39').classList.add('highlight');
            } else if (meldScore >= 20) {
                document.getElementById('meld20_29').classList.add('highlight');
            } else if (meldScore >= 10) {
                document.getElementById('meld10_19').classList.add('highlight');
            } else {
                document.getElementById('meldMenor9').classList.add('highlight');
            }
        }

        function calculateHfaPeefIndex() {
            const funcional  = parseInt(document.getElementById('funcional').value);
            const morfologico = parseInt(document.getElementById('morfologico').value);
            const biomarcador = parseInt(document.getElementById('biomarcador').value);
            const biomarcadorFA = parseInt(document.getElementById('biomarcadorFA').value);
            const indiceHfaPeef = funcional + morfologico + biomarcador + biomarcadorFA;
            document.getElementById('indiceHfaPeef').innerText = indiceHfaPeef;

            const resultado = document.getElementById('resultadoHfaPeef');
            if (indiceHfaPeef >= 5) {
                resultado.innerText = "Paciente con Insuficiencia cardiaca";
                resultado.style.backgroundColor = "red";
                resultado.style.color = "white";
            } else if (indiceHfaPeef > 2 && indiceHfaPeef < 5) {
                resultado.innerText = "Paciente con riesgo de insuficiencia cardiaca";
                resultado.style.backgroundColor = "yellow";
                resultado.style.color = "black";
            } else {
                resultado.innerText = "Paciente con bajo riesgo de insuficiencia cardiaca";
                resultado.style.backgroundColor = "green";
                resultado.style.color = "white";
            }
        }

        function resetBiomarcadorFA() {
            document.getElementById('biomarcadorFA').value = "0";
        }

        function resetBiomarcador() {
            document.getElementById('biomarcador').value = "0";
        }

        document.getElementById('funcional').addEventListener('change', calculateHfaPeefIndex);
        document.getElementById('morfologico').addEventListener('change', calculateHfaPeefIndex);
        document.getElementById('biomarcador').addEventListener('change', calculateHfaPeefIndex);
        document.getElementById('biomarcadorFA').addEventListener('change', calculateHfaPeefIndex);

        function evaluateStressEcho() {
            const diabetes = document.getElementById('diabetes').checked;
            const hipertension = document.getElementById('hipertension').checked;
            const dislipidemia = document.getElementById('dislipidemia').checked;
            const tabaquismo = document.getElementById('tabaquismo').checked;
            const historiaPatologiaCoronaria = document.getElementById('historiaPatologiaCoronaria').checked;
            const historiaFamiliarPatologiaCoronaria = document.getElementById('historiaFamiliarPatologiaCoronaria').checked;
            const arteriopatiaPeriferica = document.getElementById('arteriopatiaPeriferica').checked;
            const edad = parseInt(document.getElementById('edad').value) || 0;

            let riesgoModerado = 0;
            let mensaje = "No es necesario ecocardiograma de stress";
            let color = "green";

            if (diabetes || historiaPatologiaCoronaria) {
                mensaje = "Es necesario ecocardiograma de stress";
                color = "red";
            } else {
                if (hipertension) riesgoModerado++;
                if (dislipidemia) riesgoModerado++;
                if (tabaquismo) riesgoModerado++;
                if (historiaFamiliarPatologiaCoronaria) riesgoModerado++;
                if (arteriopatiaPeriferica) riesgoModerado++;

                if (riesgoModerado >= 2 || (riesgoModerado >= 1 && edad >= 50)) {
                    mensaje = "Es necesario ecocardiograma de stress";
                    color = "red";
                }
            }

            const stressEchoMessage = document.getElementById('stressEchoMessage');
            stressEchoMessage.innerText = mensaje;
            stressEchoMessage.style.backgroundColor = color;
        }

        function evaluateAngioTac() {
            const resultadoStress = parseInt(document.getElementById('resultadoStress').value);
            const angioTacMessage = document.getElementById('angioTacMessage');

            if (resultadoStress === 1 || resultadoStress === 2) {
                angioTacMessage.innerText = "Está indicado la realización de angioTAC";
                angioTacMessage.style.backgroundColor = "red";
            } else {
                angioTacMessage.innerText = "No es necesario angioTAC";
                angioTacMessage.style.backgroundColor = "green";
            }
        }

        function evaluateCoronariografia() {
            const estenosisDerecha = document.getElementById('estenosisDerecha').checked;
            const estenosisIzquierda = document.getElementById('estenosisIzquierda').checked;
            const scoreCalcico = document.getElementById('scoreCalcico').checked;
            const resultadoStress = parseInt(document.getElementById('resultadoStress').value);
            const historiaPatologiaCoronaria = document.getElementById('historiaPatologiaCoronaria').checked;

            const coronariografiaMessage = document.getElementById('coronariografiaMessage');

            if (estenosisDerecha || estenosisIzquierda || scoreCalcico || resultadoStress === 3 || historiaPatologiaCoronaria) {
                coronariografiaMessage.innerText = "Está indicado la realización de coronariografía";
                coronariografiaMessage.style.backgroundColor = "red";
            } else {
                coronariografiaMessage.innerText = "No es necesario realizar coronariografía";
                coronariografiaMessage.style.backgroundColor = "green";
            }
        }

        function evaluateCateterismoDerecho() {
            const fraccionVD = parseInt(document.getElementById('fraccionVD').value);
            const tapse = parseFloat(document.getElementById('Tapse').value) || 16;
            const papsEstimada = parseFloat(document.getElementById('papsEstimada').value) || 44;

            const cateterismoMessage = document.getElementById('cateterismoMessage');

            if (fraccionVD === 1 && tapse > 14 && papsEstimada < 45) {
                cateterismoMessage.innerText = "No está indicado la realización de cateterismo derecho";
                cateterismoMessage.style.backgroundColor = "green";
            } else {
                cateterismoMessage.innerText = "Está indicada la realización de cateterismo derecho";
                cateterismoMessage.style.backgroundColor = "red";
            };
        }


        function evaluateAaGradient() {
            const fio2 = parseFloat(document.getElementById('fio2').value) || 0.21;
            const paco2 = parseFloat(document.getElementById('paco2').value) || 35;
            const pao2 = parseFloat(document.getElementById('pao2').value) || 95;
            const edad = parseInt(document.getElementById('edad').value) || 50;

            const aaGradient = (713 * fio2) - (paco2 / 0.8) - pao2;
            const aaGradientMessage = document.getElementById('aaGradientMessage');
            const ecoContrasteMessage = document.getElementById('ecoContrasteMessage');

            aaGradientMessage.innerText = "Gradiente A-a de oxígeno: " + aaGradient.toFixed(2);

            if ((edad > 64 && aaGradient > 20) || (edad <= 64 && aaGradient > 15)) {
                aaGradientMessage.style.backgroundColor = "red";
                ecoContrasteMessage.innerText = "Se requiere realizar eco contraste para valorar shunt";
                ecoContrasteMessage.style.backgroundColor = "red";
            } else {
                aaGradientMessage.style.backgroundColor = "green";
                ecoContrasteMessage.innerText = "No se requiere ecografía de contraste";
                ecoContrasteMessage.style.backgroundColor = "green";
            }

            highlightPaO2Row(pao2);
        }

        function evaluateEdad(){
            evaluateAaGradient();
            evaluateStressEcho();
        }
        function evaluateStress(){
            evaluateAngioTac();
            evaluateCoronariografia();
        }
        function highlightPaO2Row(pao2) {
            document.getElementById('leve').style.backgroundColor = "";
            document.getElementById('moderada').style.backgroundColor = "";
            document.getElementById('severa').style.backgroundColor = "";
            document.getElementById('muySevera').style.backgroundColor = "";

            if (pao2 >= 80) {
                document.getElementById('leve').style.backgroundColor = "red";
            } else if (pao2 >= 60) {
                document.getElementById('moderada').style.backgroundColor = "red";
            } else if (pao2 >= 50) {
                document.getElementById('severa').style.backgroundColor = "red";
            } else {
                document.getElementById('muySevera').style.backgroundColor = "red";
            }
        }

        function evaluatePulmonaryFunction() {
            const fev1 = parseFloat(document.getElementById('fev1').value) || 0;
            const fvc = parseFloat(document.getElementById('fvc').value) || 0;
            const fev1FvcRatio = fev1 / fvc;
            const pulmonaryFunctionMessage = document.getElementById('pulmonaryFunctionMessage');

            document.getElementById('fev1FvcRatio').innerText = fev1FvcRatio.toFixed(2);

            if (fev1FvcRatio < 0.7) {
                if (fvc <= 80) {
                    if (fvc > 65) {
                        pulmonaryFunctionMessage.innerText = "Patrón restrictivo leve (FVC > 65%)";
                    } else if (fvc >= 50) {
                        pulmonaryFunctionMessage.innerText = "Patrón restrictivo moderado (FVC 50-65%)";
                    } else if (fvc >= 35) {
                        pulmonaryFunctionMessage.innerText = "Patrón restrictivo severo (FVC 35-49%)";
                    } else {
                        pulmonaryFunctionMessage.innerText = "Patrón restrictivo muy severo (FVC >35%)";
                    }
                    pulmonaryFunctionMessage.style.backgroundColor = "red";
                } else {
                    pulmonaryFunctionMessage.innerText = "Patrón normal";
                    pulmonaryFunctionMessage.style.backgroundColor = "green";
                }
            } else {
                if (fvc <= 80) {
                    pulmonaryFunctionMessage.innerText = "Patrón mixto";
                    pulmonaryFunctionMessage.style.backgroundColor = "red";
                } else {
                    if (fev1 > 65) {
                        pulmonaryFunctionMessage.innerText = "Patrón obstructivo leve (FEV1 > 65%)";
                    } else if (fev1 >= 50) {
                        pulmonaryFunctionMessage.innerText = "Patrón obstructivo moderado (FEV1 50-65%)";
                    } else if (fev1 >= 35) {
                        pulmonaryFunctionMessage.innerText = "Patrón obstructivo severo (FEV1 35-49%)";
                    } else {
                        pulmonaryFunctionMessage.innerText = "Patrón obstructivo muy severo (FEV1 <35%)";
                    }
                    pulmonaryFunctionMessage.style.backgroundColor = "red";
                }
            }
        };

        function calculateEGFR() {
            const creatinine = parseFloat(document.getElementById('currentCreatinine').value || 0.5);
            const sexo = parseInt(document.getElementById('sexo').value);
            const edad = parseInt(document.getElementById('edad').value) || 45;
            const k = sexo === 1 ? 0.9 : 0.7;
            const a = sexo === 1 ? -0.411 : -0.329;
            const min = Math.min(creatinine / k, 1);
            const max = Math.max(creatinine / k, 1);
            const eGFR = 141 * Math.pow(min, a) * Math.pow(max, -1.209) * Math.pow(0.993, edad) * (sexo === 2 ? 1.018 : 1);

             document.getElementById('egfrValue').innerText = eGFR.toFixed(2);

            // Reset table row backgrounds
            const rows = document.querySelectorAll('#egfrTable tr');
            rows.forEach(row => row.style.backgroundColor = '');

            // Highlight the appropriate row
            if (eGFR >= 90) {
                document.getElementById('grado1').style.backgroundColor = 'red';
            } else if (eGFR >= 60) {
                document.getElementById('grado2').style.backgroundColor = 'red';
            } else if (eGFR >= 45) {
                document.getElementById('grado3a').style.backgroundColor = 'red';
            } else if (eGFR >= 30) {
                document.getElementById('grado3b').style.backgroundColor = 'red';
            } else if (eGFR >= 15) {
                document.getElementById('grado4').style.backgroundColor = 'red';
            } else {
                document.getElementById('grado5').style.backgroundColor = 'red';
            }   
            checkAKI();
        }

        function checkAKI() {
            const currentCreatinine = parseFloat(document.getElementById('currentCreatinine').value|| 0.5);
            const previousCreatinine = parseFloat(document.getElementById('previousCreatinine').value || 0.5);
            const akiMessage = document.getElementById('akiMessage');

            if (currentCreatinine >= previousCreatinine * 1.5 && currentCreatinine <= previousCreatinine * 2 ) {
                akiMessage.style.backgroundColor = 'red';
                akiMessage.innerText = "Posible AKI grado 1 (aumento en 0,3 mg/dl o incremento 1,5-2 veces valor previo)";
            } else if (currentCreatinine > previousCreatinine * 2 && currentCreatinine <= previousCreatinine * 3) {
                akiMessage.style.backgroundColor = 'red';
                akiMessage.innerText = "Posible AKI grado 2 (incremento 2-3 veces valor previo)";
            } else if (currentCreatinine > previousCreatinine * 3 || currentCreatinine >= 4) {
                akiMessage.style.backgroundColor = 'red';
                akiMessage.innerText = "Posible AKI grado 3 (incremento >3 veces valor previo o Cr >=4gr/dl)";
            } else {
                akiMessage.style.backgroundColor = 'green';
                akiMessage.innerText = "AKI poco probable";
            }
}

        function calculateCRRTScore() {
            const falloHepatico = parseInt(document.getElementById('falloHepatico').value);
            const donanteAsistolia = parseInt(document.getElementById('donanteAsistolia').value);
            const retrasplante = parseInt(document.getElementById('retrasplante').value);
            const vasopresoresPreop = parseInt(document.getElementById('vasopresoresPreop').value);
            const crrtPreop = parseInt(document.getElementById('crrtPreop').value);
            const kPreop = parseFloat(document.getElementById('kPreop').value) || 3.5;
            //const isquemiaFrio = parseFloat(document.getElementById('isquemiaFrio').value) || 0.71;
            const bilirrubina = parseFloat(document.getElementById('bilirrubina').value) || 5;

            let score = 0;

            if (falloHepatico === 1) { // Crónico
                if (donanteAsistolia === 1) score += 10;
                if (retrasplante === 1) score += 9;
                if (vasopresoresPreop === 1) score += 7;
                if (crrtPreop === 1) score += 6;
                score += Math.floor((kPreop - 3.5) / 0.12);
                //score += Math.floor(isquemiaFrio / 0.72);
                score += Math.floor(bilirrubina / 6);
            } else if (falloHepatico === 2) { // Agudo
                if (donanteAsistolia === 1) score += 10;
                if (vasopresoresPreop === 1) score += 7;
                if (crrtPreop === 1) score += 28;
                //score += Math.floor(isquemiaFrio / 0.72);
                score += Math.floor(bilirrubina / 6);
            }
            let tiempo = 0;
            let mensaje = "";
            if (score >= 42 && falloHepatico===1){
                mensaje = " .Riesgo elevado de requerir CRRT intraoperatoria";

            }else if (score >=28 && falloHepatico ===2){
                mensaje = " .Riesgo elevado de requerir CRRT intraoperatoria";
            }else if (score <42  && falloHepatico ===1){
                tiempo = (42 - score) * 0.72;
                mensaje = " .Riesgo de necesitar CRRT si Tº isquemia frío > " + tiempo + " horas";
            } else if (score <28 && falloHepatico ===2){
                tiempo = (28 - score) * 0.72;
                mensaje = " .Riesgo de necesitar CRRT si Tº isquemia frío > " + tiempo + " horas";
            };
            const crrtScoreMessage = document.getElementById('crrtScoreMessage');
            crrtScoreMessage.innerText = "Score de CRRT: " + score + mensaje;
        }
        function calculateBleedingScore() {
            let score = 0;

            const retrasplante = document.getElementById('retrasplantehemato').value;
            const sexo = document.getElementById('sexohemato').value;
            const edad = parseFloat(document.getElementById('edadhemato').value);
            const hemoglobina = parseFloat(document.getElementById('hemoglobina').value);
            const protrombina = parseFloat(document.getElementById('protrombina').value);
            const creatinina = parseFloat(document.getElementById('creatininahemato').value);
            const albumina = parseFloat(document.getElementById('albumina').value);
            const plaquetas = parseFloat(document.getElementById('plaquetas').value);
            const messageDiv = document.getElementById('bleedingScoreMessage');
            const cirugiaAbdominalPrevia = document.getElementById('cirugiaAbdominalPrevia').checked;
            const peritonitisBacterianaEspontanea = document.getElementById('peritonitisBacterianaEspontanea').checked;

            if (retrasplante == '1') score += 1;
            if (hemoglobina < 10) score += 1;
            if (edad > 40) score += 1;
            if (protrombina >2) score += 2;
            if (sexo == '1' && creatinina >= 1.36) score += 1;
            if (sexo == '2' && creatinina >= 1.28) score += 1;
            if (plaquetas < 70000) score += 1;
            if (albumina < 24) score += 1;

            
            if (score >= 3 || cirugiaAbdominalPrevia || peritonitisBacterianaEspontanea) {
                messageDiv.style.backgroundColor = 'red';
                messageDiv.innerHTML = `Alto riesgo de sangrado. Score: ${score}`;
            } else {
                messageDiv.style.backgroundColor = 'green';
                messageDiv.innerHTML = `Bajo riesgo de sangrado. Score: ${score}`;
            }
        }
        function calculateScoreNPT() {
            const isSobrecargaHidrica = document.getElementById('sobrecargaHidrica').value === '1';
            let score = 0;

            if (isSobrecargaHidrica) {
                score += parseInt(document.getElementById('capacidadAlimentarse').value);
                score += parseInt(document.getElementById('menosMitadDieta5Dias').value);
                score += parseInt(document.getElementById('perdidaPeso3_6Meses').value);
            } else {
                score += parseInt(document.getElementById('imc').value);
                score += parseInt(document.getElementById('perdidaPeso6Meses').value);
                score += parseInt(document.getElementById('enfermedadAgudaSinAlimentacion').value);
            }

            score += parseInt(document.getElementById('hepatitisAlcoholicaAguda').value);
            score += parseInt(document.getElementById('nutricionEnteral').value);

            const messageDiv = document.getElementById('scoreMessageNPT');
             if (score === 0) {
                messageDiv.style.backgroundColor = 'green';
                messageDiv.style.color = 'white';
                messageDiv.innerHTML = `Bajo riesgo. Score Nutricional: ${score}`;
             } else if (score === 1) {
                messageDiv.style.backgroundColor = 'yellow';
                messageDiv.style.color = 'black';
                messageDiv.innerHTML = `Riesgo moderado. Score Nutricional: ${score}`;
             } else {
                messageDiv.style.backgroundColor = 'red';
                messageDiv.style.color = 'white';
                messageDiv.innerHTML = `Alto riesgo. Score Nutricional: ${score}`;
            }
        }

        function habilitar(){
            const isSobrecargaHidrica = this.value === '1';
            document.getElementById('imc').disabled = isSobrecargaHidrica;
            document.getElementById('perdidaPeso6Meses').disabled = isSobrecargaHidrica;
            document.getElementById('enfermedadAgudaSinAlimentacion').disabled = isSobrecargaHidrica;

            document.getElementById('capacidadAlimentarse').disabled = !isSobrecargaHidrica;
            document.getElementById('menosMitadDieta5Dias').disabled = !isSobrecargaHidrica;
            document.getElementById('perdidaPeso3_6Meses').disabled = !isSobrecargaHidrica;

            calculateScoreNPT();
        }

        function calculateFrailScore() {
            let score = 0;

            score += parseInt(document.getElementById('fatigabilidad').value);
            score += parseInt(document.getElementById('resistencia').value);
            score += parseInt(document.getElementById('deambulacion').value);
            score += parseInt(document.getElementById('pesofrail').value);

            const comorbilidades = document.querySelectorAll('input[name="comorbilidad"]:checked');
            if (comorbilidades.length > 4) {
                score += 1;
            }

            const messageDiv = document.getElementById('frailScoreMessage');
            if (score === 0) {
                messageDiv.style.backgroundColor = 'green';
                messageDiv.style.color = 'white';
                messageDiv.innerHTML = `Bajo riesgo de fragilidad. Score Frail: ${score}`;
            } else if (score === 1) {
                messageDiv.style.backgroundColor = 'yellow';
                messageDiv.style.color = 'black';
                messageDiv.innerHTML = `Riesgo moderado de fragilidad. Score Frail: ${score}`;
            } else {
                messageDiv.style.backgroundColor = 'red';
                messageDiv.style.color = 'white';
                messageDiv.innerHTML = `Alto riesgo de fragilidad. Score Frail: ${score}`;
            }
        }
        function calculateDukeScore() {
                    let score = 0;
                    score += parseFloat(document.getElementById('autocuidado').value);
                    score += parseFloat(document.getElementById('caminarCasa').value);
                    score += parseFloat(document.getElementById('caminar200m').value);
                    score += parseFloat(document.getElementById('subirEscaleras').value);
                    score += parseFloat(document.getElementById('correr').value);
                    score += parseFloat(document.getElementById('trabajoLigero').value);
                    score += parseFloat(document.getElementById('trabajoModerado').value);
                    score += parseFloat(document.getElementById('trabajoFuerte').value);
                    score += parseFloat(document.getElementById('trabajosJardin').value);
                    score += parseFloat(document.getElementById('relacionesSexuales').value);
                    score += parseFloat(document.getElementById('ejercicioModerado').value);
                    score += parseFloat(document.getElementById('ejercicioIntenso').value);

                    const messageDiv = document.getElementById('dukeScoreMessage');
                    if (score < 15) {
                        messageDiv.style.backgroundColor = 'red';
                        messageDiv.style.color = 'white';
                        messageDiv.innerHTML = `Baja capacidad funcional. Score: ${score}`;
                    } else {
                        messageDiv.style.backgroundColor = 'green';
                        messageDiv.style.color = 'white';
                        messageDiv.innerHTML = `Capacidad funcional aceptable. Score: ${score}`;
                    }
                }

//listeners
        document.getElementById('resultadoStress').addEventListener('change', evaluateStress);
        document.getElementById('estenosisDerecha').addEventListener('change', evaluateCoronariografia);
        document.getElementById('estenosisIzquierda').addEventListener('change', evaluateCoronariografia);
        document.getElementById('scoreCalcico').addEventListener('change', evaluateCoronariografia);
        document.getElementById('historiaPatologiaCoronaria').addEventListener('change', evaluateCoronariografia);
        document.getElementById('fraccionVD').addEventListener('change', evaluateCateterismoDerecho);
        document.getElementById('Tapse').addEventListener('input', evaluateCateterismoDerecho);
        document.getElementById('papsEstimada').addEventListener('input', evaluateCateterismoDerecho);
        document.getElementById('fio2').addEventListener('input', evaluateAaGradient);
        document.getElementById('paco2').addEventListener('input', evaluateAaGradient);
        document.getElementById('pao2').addEventListener('input', evaluateAaGradient);
        document.getElementById('edad').addEventListener('input', evaluateEdad);
        document.getElementById('fvc').addEventListener('input', evaluatePulmonaryFunction);
        document.getElementById('falloHepatico').addEventListener('change', calculateCRRTScore);
        document.getElementById('donanteAsistolia').addEventListener('change', calculateCRRTScore);
        document.getElementById('retrasplante').addEventListener('change', calculateCRRTScore);
        document.getElementById('vasopresoresPreop').addEventListener('change', calculateCRRTScore);
        document.getElementById('crrtPreop').addEventListener('change', calculateCRRTScore);
        document.getElementById('kPreop').addEventListener('input', calculateCRRTScore);
        document.getElementById('bilirrubina').addEventListener('input', calculateCRRTScore);
        
        document.getElementById('retrasplantehemato').addEventListener('change', calculateBleedingScore);
        document.getElementById('sexohemato').addEventListener('change', calculateBleedingScore);
        document.getElementById('edadhemato').addEventListener('input', calculateBleedingScore);
        document.getElementById('hemoglobina').addEventListener('input', calculateBleedingScore);
        document.getElementById('protrombina').addEventListener('input', calculateBleedingScore);
        document.getElementById('creatininahemato').addEventListener('input', calculateBleedingScore);
        document.getElementById('albumina').addEventListener('input', calculateBleedingScore);
        document.getElementById('plaquetas').addEventListener('input', calculateBleedingScore);
        
        document.getElementById('sobrecargaHidrica').addEventListener('change', habilitar);
        document.getElementById('imc').addEventListener('change', calculateScoreNPT);
        document.getElementById('perdidaPeso6Meses').addEventListener('change', calculateScoreNPT);
        document.getElementById('enfermedadAgudaSinAlimentacion').addEventListener('change', calculateScoreNPT);
        document.getElementById('capacidadAlimentarse').addEventListener('change', calculateScoreNPT);
        document.getElementById('menosMitadDieta5Dias').addEventListener('change', calculateScoreNPT);
        document.getElementById('perdidaPeso3_6Meses').addEventListener('change', calculateScoreNPT);
        document.getElementById('hepatitisAlcoholicaAguda').addEventListener('change', calculateScoreNPT);
        document.getElementById('nutricionEnteral').addEventListener('change', calculateScoreNPT);

           // Añadir listeners para recalcular el score cuando cambien los valores relevantes
        document.getElementById('fatigabilidad').addEventListener('change', calculateFrailScore);
        document.getElementById('resistencia').addEventListener('change', calculateFrailScore);
        document.getElementById('deambulacion').addEventListener('change', calculateFrailScore);
        document.getElementById('pesofrail').addEventListener('change', calculateFrailScore);
        document.querySelectorAll('input[name="comorbilidad"]').forEach(element => {
            element.addEventListener('change', calculateFrailScore);
        });

        document.querySelectorAll('#autocuidado, #caminarCasa, #caminar200m, #subirEscaleras, #correr, #trabajoLigero, #trabajoModerado, #trabajoFuerte, #trabajosJardin, #relacionesSexuales, #ejercicioModerado, #ejercicioIntenso').forEach(element => {
                    element.addEventListener('change', calculateDukeScore);
                });
    </script>


</body>
</html>